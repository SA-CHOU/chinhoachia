<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>金蠔呷</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg: #fff8e6;
  --ink: #3a2e1f;
  --muted: rgba(58,46,31,.72);
  --accent: #b08968;
  --accent-deep: #5a3e2b;
  --card: rgba(255,253,242,.92);

  --line: rgba(232,220,194,.9);

  --shadow-sm: 0 8px 18px rgba(60,40,20,.10);
  --shadow-md: 0 14px 34px rgba(60,40,20,.14);
  --shadow-lg: 0 22px 60px rgba(60,40,20,.18);

  --radius-sm: 14px;
  --radius-md: 20px;
  --radius-lg: 26px;

  --ease: cubic-bezier(.2,.8,.2,1);

  /* ✅ Header 尺寸變數：scroll 時縮小用 */
  --nav-pad-y: 18px;
  --nav-pad-x: 36px;
  --logo-slot: 65px;
  --logo-img: 100px;
}

*{ box-sizing:border-box; }

body {
  margin: 0;
  font-family:
    "Noto Serif JP",
    "Hiragino Mincho ProN",
    "Yu Mincho",
    "Noto Sans TC",
    serif;
  line-height: 1.9;
  color: var(--ink);
  background-color: var(--bg);
  scroll-behavior: smooth;
  position: relative;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ✅ 全站淡化背景 + 柔光（不改色調） */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  background-image: url("img/background/Oysters.png");
  background-repeat: repeat;
  background-size: 220px auto;
  background-position: top left;
  opacity: 0.10;
  pointer-events: none;
}
body::after{
  content:"";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(900px 600px at 12% 0%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(900px 600px at 88% 12%, rgba(255,255,255,.35), transparent 62%),
    radial-gradient(1200px 800px at 50% 100%, rgba(255,245,220,.40), transparent 55%);
}

/* =========================
   ✅ Apple 進場：先微模糊→清晰（非常淡）
   ========================= */
.fade {
  opacity: 0;
  transform: translateY(26px);
  filter: blur(8px); /* ✅ 淡淡的模糊 */
  transition:
    opacity .9s var(--ease),
    transform .9s var(--ease),
    filter 1.1s var(--ease);
}
.fade.show {
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
}

/* =========================
   ✅ Header（玻璃感）+ 滑動縮小
   ========================= */
header {
  position: sticky;
  top: 0;
  background-color: rgba(255, 248, 230, 0.86);
  border-bottom: 1px solid rgba(232,220,194,.85);
  z-index: 1000;
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 22px rgba(60,40,20,.06);
}

/* ✅ 用變數控制 nav padding，scroll 時切換 */
nav {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: center;
  padding: var(--nav-pad-y) var(--nav-pad-x);
  transition: padding .28s var(--ease);
}

/* ✅ Logo：完全「純圖片」(無 filter/陰影/hover) */
.logo {
  height: var(--logo-slot);
  display: flex;
  align-items: center;
  overflow: hidden;
  transition: height .28s var(--ease);
}
.logo img {
  height: var(--logo-img);
  width: auto;
  object-fit: contain;
  display: block;
  transition: height .28s var(--ease);
}

/* 導覽 */
nav div {
  display: flex;
  justify-content: center;
  gap: 34px;
}

nav a {
  text-decoration: none;
  font-size: 18px;
  letter-spacing: .5px;
  color: var(--ink);
  padding: 8px 12px;
  border-radius: 999px;
  transition: background .25s var(--ease), transform .25s var(--ease), color .25s var(--ease), box-shadow .25s var(--ease);
}

nav a:hover {
  color: var(--accent);
  background: rgba(255,245,220,.65);
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(60,40,20,.08);
}
nav a.active{
  background: rgba(176,137,104,.18);
  color: #6a4b32;
  box-shadow: 0 10px 18px rgba(60,40,20,.08);
}

/* ✅ Header 縮小狀態（加在 header 上） */
header.shrink {
  box-shadow: 0 8px 18px rgba(60,40,20,.05);
}
header.shrink nav{
  --nav-pad-y: 10px;
  --logo-slot: 52px;
  --logo-img: 82px;
}

/* ===== Hero ===== */
.hero {
  background: url("food.jpg") center/cover no-repeat;
  height: 80vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.hero::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(1200px 700px at 50% 20%, rgba(0,0,0,.00), rgba(0,0,0,.28) 70%),
    linear-gradient(to bottom, rgba(0,0,0,.20), rgba(0,0,0,.10));
  pointer-events:none;
}
.hero h1 {
  position: relative;
  z-index: 1;
  font-size: 56px;
  margin: 0;
  color: #fff;
  text-shadow: 0 10px 30px rgba(60,40,20,.65);
  letter-spacing: 2px;
}
.hero span {
  display: inline-block;
  margin-top: 18px;
  font-size: 22px;
  font-weight: 600;
  letter-spacing: 4px;
  color: var(--accent-deep);
  background: rgba(255, 245, 220, 0.82);
  padding: 10px 26px;
  border-radius: 999px;
  border: 1px solid rgba(232,220,194,.9);
  box-shadow: var(--shadow-sm);
}

/* ===== 區塊 ===== */
section {
  padding: 96px 24px;
  max-width: 1100px;
  margin: auto;
}
section h2 {
  text-align: center;
  font-size: 34px;
  margin-bottom: 32px;
  letter-spacing: 1px;
  position: relative;
}
section h2::after{
  content:"";
  display:block;
  width: 82px;
  height: 2px;
  margin: 14px auto 0;
  background: linear-gradient(to right, transparent, rgba(176,137,104,.55), transparent);
  border-radius: 999px;
}
.story p {
  max-width: 760px;
  margin: auto;
  text-align: center;
  font-size: 19px;
  color: var(--muted);
}

/* ===== 菜單 ===== */
.menu-grid{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 18px;
}
.menu-grid img{
  width: 100%;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  border-radius: var(--radius-sm);
  display: block;
  background: #fff;
  border: 1px solid rgba(232,220,194,.7);
  box-shadow: var(--shadow-sm);
  cursor: zoom-in;
  transition: transform .28s var(--ease), box-shadow .28s var(--ease), filter .28s var(--ease);
}
.menu-grid img:hover{
  transform: translateY(-4px) scale(1.018);
  box-shadow: var(--shadow-md);
  filter: saturate(1.05) contrast(1.02);
}

/* 地圖 */
.map iframe {
  width: 100%;
  height: 460px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(232,220,194,.75);
  box-shadow: var(--shadow-sm);
}

/* 媒體 */
.media {
  background: var(--card);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(232,220,194,.8);
  box-shadow: var(--shadow-md);
}
.media-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 46px;
  align-items: center;
  padding: 22px;
}
.media img {
  width: 100%;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(232,220,194,.75);
  box-shadow: var(--shadow-sm);
  transition: transform .28s var(--ease), box-shadow .28s var(--ease);
}
.media img:hover{
  transform: translateY(-3px) scale(1.01);
  box-shadow: var(--shadow-md);
}
.media p{
  margin: 0;
  font-size: 19px;
  color: var(--muted);
}

/* Footer */
footer {
  background-color: rgba(255, 248, 230, 0.90);
  text-align: center;
  padding: 60px 20px;
  border-top: 1px solid rgba(232,220,194,.9);
}
.footer-line {
  margin-top: 28px;
  display: inline-block;
  padding: 14px 36px;
  background: linear-gradient(to bottom, rgba(90,62,43,1), rgba(63,43,28,1));
  color: #fff8e6;
  border-radius: 999px;
  font-size: 16px;
  letter-spacing: 2px;
  text-decoration: none;
  border: 1px solid rgba(255,248,230,.18);
  box-shadow: 0 10px 24px rgba(60,40,20,.22);
  transition: transform .25s var(--ease), box-shadow .25s var(--ease), filter .25s var(--ease);
}
.footer-line:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 34px rgba(60,40,20,.26);
  filter: brightness(1.02);
}

/* 回到最上方 */
#backToTop {
  position: fixed;
  right: 28px;
  bottom: 36px;
  width: 52px;
  height: 52px;
  border-radius: 999px;
  border: 1px solid rgba(255,248,230,.45);
  background: linear-gradient(to bottom, rgba(176,137,104,1), rgba(156,118,87,1));
  color: #fff;
  font-size: 22px;
  display: none;
  cursor: pointer;
  box-shadow: 0 16px 30px rgba(60,40,20,.18);
  transition: transform .2s var(--ease), box-shadow .2s var(--ease);
}
#backToTop:hover{
  transform: translateY(-2px);
  box-shadow: 0 20px 42px rgba(60,40,20,.22);
}

/* Lightbox */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(20, 14, 10, 0.72);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 18px;
}
.lightbox.show { display: flex; }
.lightbox img {
  max-width: min(980px, 92vw);
  max-height: 82vh;
  border-radius: 18px;
  box-shadow: 0 26px 80px rgba(0,0,0,.38);
  background: #fff;
  border: 1px solid rgba(255,255,255,.18);
}
.lb-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  width: 46px;
  height: 46px;
  border-radius: 999px;
  background: rgba(255,255,255,.88);
  cursor: pointer;
  font-size: 22px;
  line-height: 46px;
  text-align: center;
  user-select: none;
  box-shadow: 0 18px 44px rgba(0,0,0,.18);
  transition: transform .2s var(--ease), background .2s var(--ease);
}
.lb-btn:hover { background: rgba(255,255,255,1); transform: translateY(-50%) scale(1.03); }
.lb-prev { left: 18px; }
.lb-next { right: 18px; }
.lb-close {
  position: absolute;
  top: 16px;
  right: 16px;
  border: none;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  background: rgba(255,255,255,.88);
  cursor: pointer;
  font-size: 22px;
  line-height: 44px;
  text-align: center;
  user-select: none;
  box-shadow: 0 18px 44px rgba(0,0,0,.18);
  transition: transform .2s var(--ease), background .2s var(--ease);
}
.lb-close:hover { background: rgba(255,255,255,1); transform: scale(1.04); }

/* 手機版 */
@media (max-width: 768px) {
  nav {
    grid-template-columns: 1fr;
    padding: 16px 18px;
    gap: 14px;
  }

  .logo {
    height: 48px;
    margin: auto;
  }
  .logo img {
    height: 74px;
  }

  /* ✅ 手機縮小狀態 */
  header.shrink nav{
    --nav-pad-y: 8px;
    --logo-slot: 42px;
    --logo-img: 66px;
  }

  nav div {
    flex-wrap: wrap;
    gap: 12px;
  }

  nav a {
    font-size: 15px;
    padding: 8px 12px;
    background: rgba(255,245,220,.6);
  }

  .hero {
    height: 68vh;
    padding: 0 18px;
  }

  .hero h1 {
    font-size: 36px;
    line-height: 1.25;
  }

  .hero span {
    font-size: 18px;
    letter-spacing: 2px;
    padding: 8px 16px;
  }

  section {
    padding: 72px 18px;
  }

  section h2 {
    font-size: 28px;
    margin-bottom: 24px;
  }

  .story p, .media p {
    font-size: 18px;
  }

  .media-content {
    grid-template-columns: 1fr;
    gap: 18px;
    padding: 18px;
  }

  #backToTop {
    right: 18px;
    bottom: 20px;
    width: 48px;
    height: 48px;
    font-size: 20px;
  }

  body::before{
    background-size: 180px auto;
    opacity: 0.08;
  }

  .lb-prev { left: 10px; }
  .lb-next { right: 10px; }
}
</style>
</head>

<body>

<header id="siteHeader">
  <nav>
    <a href="#" class="logo">
      <img src="img/logo/logo.png" alt="金蠔呷 Logo">
    </a>

    <div>
      <a href="#story">品牌故事</a>
      <a href="#menu">菜單</a>
      <a href="https://myship.7-11.com.tw/general/detail/GM2509044461123" target="_blank">線上訂購</a>
      <a href="#location">店鋪位置</a>
      <a href="#media">媒體採訪</a>
    </div>
  </nav>
</header>

<div class="hero">
  <h1>
    金蠔呷<br>
    <span id="slogan"></span>
  </h1>
</div>

<section id="story" class="story fade">
  <h2>品牌故事</h2>
  <p>我們相信，一碗好料理，能讓人記住一輩子。</p>
</section>

<section id="menu" class="menu fade">
  <h2>招牌菜單</h2>

  <div class="menu-grid" id="menuGrid">
    <img src="img/menu/curry_0.jpg" alt="咖哩系列">
    <img src="img/menu/double_0.jpg" alt="雙拼系列">
    <img src="img/menu/oyster_0.jpg" alt="牡蠣系列">
    <img src="img/menu/oyster1_0.jpg" alt="牡蠣系列 2">
    <img src="img/menu/shrimp_0.jpg" alt="蝦系列">
    <img src="img/menu/shrimp1_0.jpg" alt="蝦系列 2">
  </div>
</section>

<section id="location" class="map fade">
  <h2>店鋪位置</h2>
  <iframe src="https://www.google.com/maps?q=金蠔呷&output=embed"></iframe>
</section>

<section id="media" class="media fade">
  <h2>媒體採訪</h2>
  <div class="media-content">
    <img src="img/news/news_1.png" alt="媒體採訪">
    <p>金蠔呷曾受多家媒體專訪，以職人精神累積口碑。</p>
  </div>
</section>

<footer>
  <a href="https://line.me/R/ti/p/@你的LINEID" class="footer-line">加入官方 LINE</a>
  <div style="font-size:18px; line-height:1.9; color: rgba(58,46,31,.78);">
    基隆市中正區義二路179巷1號
  </div>
</footer>

<button id="backToTop">↑</button>

<div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="lb-close" id="lbClose" aria-label="關閉">×</button>
  <button class="lb-btn lb-prev" id="lbPrev" aria-label="上一張">‹</button>
  <img id="lbImage" alt="菜單放大圖">
  <button class="lb-btn lb-next" id="lbNext" aria-label="下一張">›</button>
</div>

<script>
/* ✅ 淡入 + Apple 模糊清晰效果（已在 CSS） */
const observer = new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting) e.target.classList.add("show");
  });
},{ threshold: 0.18 });
document.querySelectorAll(".fade").forEach(el=>observer.observe(el));

/* SLOGAN 打字 */
const text = "一口入魂的蠔料理";
let i = 0;
const slogan = document.getElementById("slogan");
(function typeEffect() {
  if (i < text.length) {
    slogan.textContent += text.charAt(i++);
    setTimeout(typeEffect, 120);
  }
})();

/* 回到最上方 */
const btn = document.getElementById("backToTop");
window.addEventListener("scroll",()=>{
  btn.style.display = window.scrollY > 300 ? "block" : "none";
});
btn.onclick = ()=>window.scrollTo({top:0,behavior:"smooth"});

/* ✅ 導覽列 active 高亮 */
const sectionIds = ["story","menu","location","media"];
const navLinks = Array.from(document.querySelectorAll('nav a[href^="#"]'));
const sectionEls = sectionIds.map(id => document.getElementById(id));

function setActiveLink(activeId){
  navLinks.forEach(a=>{
    const href = a.getAttribute("href");
    if (href === "#" || !href) return;
    a.classList.toggle("active", href === "#" + activeId);
  });
}

const spy = new IntersectionObserver((entries)=>{
  const visible = entries.filter(e => e.isIntersecting)
    .sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
  if(visible) setActiveLink(visible.target.id);
},{ threshold: [0.35, 0.55, 0.75] });

sectionEls.forEach(sec => spy.observe(sec));

/* ✅ 滑動時 Header 稍微縮小（logo 也微縮） */
const header = document.getElementById("siteHeader");
let ticking = false;

function onScrollShrink(){
  const y = window.scrollY || document.documentElement.scrollTop;
  const shouldShrink = y > 20;
  header.classList.toggle("shrink", shouldShrink);
  ticking = false;
}

window.addEventListener("scroll", ()=>{
  if(!ticking){
    window.requestAnimationFrame(onScrollShrink);
    ticking = true;
  }
});

/* ✅ 菜單 Lightbox */
const menuImgs = Array.from(document.querySelectorAll("#menuGrid img"));
const lightbox = document.getElementById("lightbox");
const lbImage = document.getElementById("lbImage");
const lbClose = document.getElementById("lbClose");
const lbPrev = document.getElementById("lbPrev");
const lbNext = document.getElementById("lbNext");
let currentIndex = 0;

function openLightbox(index){
  currentIndex = index;
  lbImage.src = menuImgs[currentIndex].src;
  lightbox.classList.add("show");
  lightbox.setAttribute("aria-hidden","false");
  document.body.style.overflow = "hidden";
}
function closeLightbox(){
  lightbox.classList.remove("show");
  lightbox.setAttribute("aria-hidden","true");
  lbImage.src = "";
  document.body.style.overflow = "";
}
function showPrev(){
  currentIndex = (currentIndex - 1 + menuImgs.length) % menuImgs.length;
  lbImage.src = menuImgs[currentIndex].src;
}
function showNext(){
  currentIndex = (currentIndex + 1) % menuImgs.length;
  lbImage.src = menuImgs[currentIndex].src;
}

menuImgs.forEach((img, idx)=> img.addEventListener("click", ()=> openLightbox(idx)));
lbClose.addEventListener("click", closeLightbox);
lbPrev.addEventListener("click", showPrev);
lbNext.addEventListener("click", showNext);

lightbox.addEventListener("click", (e)=>{ if(e.target === lightbox) closeLightbox(); });

window.addEventListener("keydown", (e)=>{
  if(!lightbox.classList.contains("show")) return;
  if(e.key === "Escape") closeLightbox();
  if(e.key === "ArrowLeft") showPrev();
  if(e.key === "ArrowRight") showNext();
});
</script>

</body>
</html>
